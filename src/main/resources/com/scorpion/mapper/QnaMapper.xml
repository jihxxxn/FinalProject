<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.scorpion.mapper.QnaMapper">
	<select id="getTotalCount" resultType="int">
		SELECT COUNT(*) FROM QNA

	</select>
	<!-- VO에 데이터주입 -->
	<select id="getListWithPaging"
		resultType="com.scorpion.domain.QnaVO">
   	<![CDATA[
  		SELECT	qnaIndex, qnaTitle, qnaContent, qnaWriter, qnaDate, qnaAnswer, qnaAnsState, qnaAnsDate, qnaPassword
  		FROM	( SELECT 	/*+INDEX_DESC(qna SYS_C007244)*/
  							rownum rn, qnaIndex, qnaTitle, qnaContent, qnaWriter, qnaDate, qnaAnswer, qnaAnsState, qnaAnsDate, qnaPassword
  				  FROM 		qna
  				  WHERE		rownum <= #{pageNum} * #{amount} )
  		WHERE rn > (#{pageNum} - 1) * #{amount}
  	]]>
	</select>

	<select id="read" resultType="com.scorpion.domain.QnaVO">
		SELECT * FROM qna WHERE qnaIndex = #{qnaIndex}
	</select>

	<insert id="insertSelectKey">
		<selectKey keyProperty="qnaIndex" resultType="long"
			order="BEFORE">
			SELECT qna_no.nextval FROM dual
		</selectKey>
		INSERT INTO qna (QNAINDEX, QNATITLE, QNACONTENT, QNAWRITER, QNADATE)
		VALUES(#{qnaIndex}, #{qnaTitle}, #{qnaContent}, #{qnaWriter}, sysdate)
	</insert>

	<delete id="delete">
  		DELETE FROM QNA WHERE QNAINDEX = #{qnaIndex}
 	</delete>

	<!-- <update id="update"> UPDATE levelTest SET test_content = #{test_content}, 
		test_exam1 = #{test_exam1}, test_exam2= #{test_exam2}, test_exam3 = #{test_exam3}, 
		test_exam4= #{test_exam4}, test_answer = #{test_answer} WHERE test_index 
		= #{test_index} </update> -->



</mapper>